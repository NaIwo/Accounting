Skrypt do stworzenia bazy

DROP INDEX ID_KAT_IDX;

DROP TABLE DANE_LOGOWANIA CASCADE CONSTRAINTS;
DROP TABLE ADRESY CASCADE CONSTRAINTS;
DROP TABLE KONTAKTY CASCADE CONSTRAINTS;
DROP TABLE KLIENCI CASCADE CONSTRAINTS;
DROP TABLE KATEGORIE CASCADE CONSTRAINTS;
DROP TABLE SKLEPY CASCADE CONSTRAINTS;
DROP TABLE PLATNOSCI CASCADE CONSTRAINTS;
DROP TABLE OGRANICZENIA CASCADE CONSTRAINTS;
DROP TABLE TRANSAKCJE CASCADE CONSTRAINTS;
DROP TABLE SUBSKRYPCJE CASCADE CONSTRAINTS;

DROP SEQUENCE TRANS_SEQ;
DROP SEQUENCE KLIENT_SEQ;
DROP SEQUENCE KAT_SEQ;
DROP SEQUENCE PLAT_SEQ;
DROP SEQUENCE OGR_SEQ;
DROP SEQUENCE ADR_SEQ;
DROP SEQUENCE KONTAKT_SEQ;

CREATE SEQUENCE trans_seq START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE klient_seq START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE kat_seq START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE plat_seq START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE ogr_seq START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE adr_seq START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE kontakt_seq START WITH 1 INCREMENT BY 1;

CREATE TABLE KONTAKTY (
    ID_KONTAKTU NUMBER(5) DEFAULT KONTAKT_SEQ.NEXTVAL CONSTRAINT PK_KONTAKT PRIMARY KEY,
    EMAIL VARCHAR2(30) NOT NULL,
    NR_TELEFONU1 NUMBER(9),
    NR_TELEFONU2 NUMBER(9)
);

CREATE TABLE ADRESY (
    ID_ADRESU NUMBER(5) DEFAULT ADR_SEQ.NEXTVAL CONSTRAINT PK_ADRES PRIMARY KEY,
    ULICA VARCHAR2(15) NOT NULL,
    NR_DOMU NUMBER(4) NOT NULL,
    NR_MIESZKANIA NUMBER(3),
    KOD_POCZTOWY NUMBER(6) NOT NULL,
    MIEJSCOWOSC VARCHAR2(20) NOT NULL 
);

CREATE TABLE DANE_LOGOWANIA (
    LOGIN VARCHAR2(20) CONSTRAINT PK_DANE PRIMARY KEY,
    HASLO VARCHAR2(20) NOT NULL
);

CREATE TABLE KLIENCI (
    ID_KLIENTA NUMBER(5) DEFAULT KLIENT_SEQ.NEXTVAL CONSTRAINT PK_KLIENT PRIMARY KEY,
    IMIE VARCHAR2(15) NOT NULL,
    NAZWISKO VARCHAR2(15) NOT NULL,
    LOGIN VARCHAR2(20) CONSTRAINT FK_LOGIN REFERENCES DANE_LOGOWANIA(LOGIN),
    ID_ADRESU NUMBER(5) CONSTRAINT FK_ADRES REFERENCES ADRESY(ID_ADRESU),
    ID_KONTAKTU NUMBER(5) CONSTRAINT FK_KONTAKT REFERENCES KONTAKTY(ID_KONTAKTU)
);

CREATE TABLE SKLEPY (
    NAZWA_SKLEPU VARCHAR2(20) CONSTRAINT PK_SKLEPY PRIMARY KEY,
    OCENA NUMBER(3,2) NOT NULL,
    ID_KLIENTA NUMBER(5) CONSTRAINT FK_KLIENT_SKLEP REFERENCES KLIENCI(ID_KLIENTA)
);

CREATE TABLE KATEGORIE (
    ID_KATEGORII NUMBER(5) DEFAULT KAT_SEQ.NEXTVAL CONSTRAINT PK_KATEGORIE PRIMARY KEY,
    NAZWA_KATEGORII VARCHAR2(20) NOT NULL,
    ID_KLIENTA NUMBER(5) CONSTRAINT FK_KLIENT_KATEGORIA REFERENCES KLIENCI(ID_KLIENTA)
);

CREATE TABLE PLATNOSCI (
    ID_PLATNOSCI NUMBER(5) DEFAULT PLAT_SEQ.NEXTVAL CONSTRAINT PK_PLATNOSCI PRIMARY KEY,
    KWOTA NUMBER(14,2) NOT NULL,
    SPOSOB VARCHAR2(20) NOT NULL,
    ID_KLIENTA NUMBER(5) CONSTRAINT FK_KLIENT_PLATNOSC REFERENCES KLIENCI(ID_KLIENTA)
);

CREATE TABLE OGRANICZENIA (
    ID_OGRANICZENIA NUMBER(5) DEFAULT OGR_SEQ.NEXTVAL CONSTRAINT PK_OGRANICZENIA PRIMARY KEY,
    ID_KLIENTA NUMBER(5) CONSTRAINT FK_KLIENT_OGRANICZENIA REFERENCES KLIENCI(ID_KLIENTA),
    ID_KATEGORII NUMBER(5) CONSTRAINT FK_KATEGORIA_OGRANICZENIA REFERENCES KATEGORIE(ID_KATEGORII),
    WARTOSC_OGRANICZENIA NUMBER(14,2) NOT NULL,
    ALARM VARCHAR2(100)
);

CREATE TABLE TRANSAKCJE (
    ID_TRANSAKCJI NUMBER(5) DEFAULT TRANS_SEQ.NEXTVAL CONSTRAINT PK_TRANSAKCJE PRIMARY KEY,
    ID_KLIENTA NUMBER(5) CONSTRAINT FK_KLIENT_TRANSAKCJE REFERENCES KLIENCI(ID_KLIENTA),
    NAZWA_SKLEPU VARCHAR2(20) CONSTRAINT FK_SKLEP_TRANSAKCJE REFERENCES SKLEPY(NAZWA_SKLEPU),
    ID_KATEGORII NUMBER(5) CONSTRAINT FK_KATEGORIA_TRANSAKCJE REFERENCES KATEGORIE(ID_KATEGORII),
    DATA DATE DEFAULT CURRENT_DATE,
    ID_PLATNOSCI NUMBER(5) CONSTRAINT FK_PLATNOSC_TRANSAKCJE REFERENCES PLATNOSCI(ID_PLATNOSCI),
    OCENA NUMBER(2) NOT NULL,
    KOMENTARZ VARCHAR2(50)
);

CREATE TABLE SUBSKRYPCJE (
    ID_KLIENTA NUMBER(5) CONSTRAINT FK_KLIENT_SUBKSRYPCJE REFERENCES KLIENCI(ID_KLIENTA),
    NAZWA_SKLEPU VARCHAR2(20),
    NAZWA_KATEGORII VARCHAR2(20),
    SPOSOB_PLATNOSCI VARCHAR2(20),
    OCENA NUMBER(2),
    KOMENTARZ VARCHAR2(50)
);

CREATE INDEX ID_KAT_IDX on KATEGORIE(NAZWA_KATEGORII);

EXEC NowyUser('ADMIN', 'ADMIN', 'ADMIN', 'ADMIN', 'ADMIN', 1, NULL, 62333, 'ADMIN', 'ADMIN@ADMIN.PL', NULL, NULL);

INSERT INTO PLATNOSCI(KWOTA, SPOSOB, ID_KLIENTA) VALUES (0, 'KARTA', 1);
INSERT INTO PLATNOSCI(KWOTA, SPOSOB, ID_KLIENTA) VALUES (0, 'GOTOWKA', 1);
INSERT INTO PLATNOSCI(KWOTA, SPOSOB, ID_KLIENTA) VALUES (0, 'BLIK', 1);
INSERT INTO PLATNOSCI(KWOTA, SPOSOB, ID_KLIENTA) VALUES (0, 'PRZELEW', 1);

INSERT INTO SKLEPY VALUES ('BIEDRONKA' , 0, 1);
INSERT INTO SKLEPY VALUES ('LIDL' , 0, 1);
INSERT INTO SKLEPY VALUES ('DECATHLON' , 0, 1);
INSERT INTO SKLEPY VALUES ('AUCHAN' , 0, 1);
INSERT INTO SKLEPY VALUES ('KAUFLAND' , 0, 1);
INSERT INTO SKLEPY VALUES ('ŻABKA' , 0, 1);
INSERT INTO SKLEPY VALUES ('ABC' , 0, 1);
INSERT INTO SKLEPY VALUES ('CROPP' , 0, 1);
INSERT INTO SKLEPY VALUES ('HM' , 0, 1);
INSERT INTO SKLEPY VALUES ('HOUSE' , 0, 1);
INSERT INTO SKLEPY VALUES ('CARREFOUR' , 0, 1);
INSERT INTO SKLEPY VALUES ('X-KOM' , 0, 1);
INSERT INTO SKLEPY VALUES ('MEDIA MARKT' , 0, 1);
INSERT INTO SKLEPY VALUES ('MEDIA EXPERT' , 0, 1);

INSERT INTO KATEGORIE(NAZWA_KATEGORII, ID_KLIENTA) VALUES('ROZRYWKA', 1);
INSERT INTO KATEGORIE(NAZWA_KATEGORII, ID_KLIENTA) VALUES('ART. SPOZYWCZE', 1);
INSERT INTO KATEGORIE(NAZWA_KATEGORII, ID_KLIENTA) VALUES('SRODKI CZYSTOSCI', 1);
INSERT INTO KATEGORIE(NAZWA_KATEGORII, ID_KLIENTA) VALUES('ART. RTV I AGD', 1);
INSERT INTO KATEGORIE(NAZWA_KATEGORII, ID_KLIENTA) VALUES('SPORT', 1);
INSERT INTO KATEGORIE(NAZWA_KATEGORII, ID_KLIENTA) VALUES('KULTURA', 1);
INSERT INTO KATEGORIE(NAZWA_KATEGORII, ID_KLIENTA) VALUES('TRANSPORT', 1);
INSERT INTO KATEGORIE(NAZWA_KATEGORII, ID_KLIENTA) VALUES('PODRÓŻE', 1);

COMMIT;